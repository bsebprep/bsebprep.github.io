<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Join Tournament - BSEB PREP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- ✅ Meta for social sharing -->
  <meta property="og:title" content="Join Tournament - BSEB PREP" />
  <meta property="og:description" content="Tap to join this tournament on BSEB PREP." />
  <meta property="og:image" content="https://envs.sh/FFh.jpg" />
  <meta property="og:url" content="https://bsebprep.github.io/join/index.html" />
  <meta name="theme-color" content="#4CAF50" />

  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding-top: 50px;
      background-color: #f9f9f9;
    }

    h3 {
      color: #333;
    }

    .spinner {
      margin: 30px auto;
      width: 40px;
      height: 40px;
      border: 4px solid #ccc;
      border-top: 4px solid #4CAF50;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>

  <script>
    function openAppOrRedirect() {
      const params = new URLSearchParams(window.location.search);
      const tournamentId = params.get('tournamentId');

      // Fallback to Telegram (or Play Store when live)
      const fallbackUrl = 'https://t.me/itzme_dear';

      if (!tournamentId) {
        document.body.innerHTML = '<h2>Invalid tournament link</h2>';
        return;
      }

      // Android: use intent
      const androidIntent = `intent://join?tournamentId=${tournamentId}#Intent;scheme=bsebprep;package=com.example.bsebprep;S.browser_fallback_url=${encodeURIComponent(fallbackUrl)};end`;

      // iOS: use custom scheme
      const iosUrl = `bsebprep://join?tournamentId=${tournamentId}`;

      const ua = navigator.userAgent || navigator.vendor || window.opera;

      if (/android/i.test(ua)) {
        window.location.replace(androidIntent);
      } else if (/iPhone|iPad|iPod/i.test(ua)) {
        window.location.href = iosUrl;
        setTimeout(() => {
          window.location.href = fallbackUrl;
        }, 2000);
      } else {
        // Desktop fallback
        window.location.href = fallbackUrl;
      }
    }
  </script>
</head>
<body onload="openAppOrRedirect()">
  <h3>Opening BSEB PREP App...</h3>
  <p>If it doesn’t open, you’ll be redirected shortly.</p>
  <div class="spinner"></div>
</body>
</html>
